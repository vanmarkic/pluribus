# AI Sort UI Design

Port Remail's AI sorting UI components to Pluribus.

## Component Structure

```
src/renderer/components/ai-sort/
├── index.ts              # Barrel export
├── types.ts              # Frontend types (ReviewItem)
├── AISortView.tsx        # Tab container (Dashboard | Review)
├── AIDashboard.tsx       # Stats cards, budget, patterns, activity
├── ReviewQueue.tsx       # List + single view modes
├── AIAnalysisPanel.tsx   # Confidence meter, priority, tags, reasoning
└── TagManager.tsx        # Modal for editing tags
```

## Type Mapping

| Remail Type | Pluribus Equivalent |
|-------------|---------------------|
| `AIAnalysis` | `ClassificationState` (confidence, priority, suggestedTags, reasoning) |
| `ReviewItem` | `Email & { classification: ClassificationState }` |
| `AIStats` | `ClassificationStats` |

Frontend types.ts:
```typescript
import type { Email, ClassificationState, ClassificationStats, Tag } from '../../../core/domain';

export type ReviewItem = Email & {
  classification: ClassificationState;
};

export type { ClassificationStats as AIStats, Tag };
```

## IPC API

Add to `window.mailApi` in stores/index.ts:

```typescript
aiSort: {
  getStats: () => Promise<ClassificationStats>;
  getPendingReview: (opts?: { sortBy?: string; limit?: number }) => Promise<ReviewItem[]>;
  accept: (emailId: number, appliedTags: string[]) => Promise<void>;
  dismiss: (emailId: number) => Promise<void>;
  bulkAccept: (emailIds: number[]) => Promise<void>;
  bulkDismiss: (emailIds: number[]) => Promise<void>;
  getConfusedPatterns: (limit?: number) => Promise<ConfusedPattern[]>;
  getRecentActivity: (limit?: number) => Promise<ClassificationFeedback[]>;
  classifyUnprocessed: () => Promise<number>;
  clearConfusedPatterns: () => Promise<void>;
};
```

## App Routing

Add `ai-sort` view case in App.tsx:

```typescript
{view === 'ai-sort' ? (
  <AISortView />
) : ...}
```

## Styling (Dark Mode)

Replace hardcoded colors with CSS variables:

| Remail | Pluribus |
|--------|----------|
| `bg-white` | `var(--color-bg)` |
| `bg-gray-50` | `var(--color-bg-secondary)` |
| `bg-gray-100` | `var(--color-bg-tertiary)` |
| `text-gray-900` | `var(--color-text-primary)` |
| `text-gray-500` | `var(--color-text-secondary)` |
| `border-gray-200` | `var(--color-border)` |
| `bg-green-500` | `var(--color-success)` |
| `bg-red-500` | `var(--color-danger)` |

## UI Primitives

Create in `components/ui/` if missing:
- Card, CardHeader, CardContent, CardTitle
- Progress
- Badge
- Button (size, variant props)
- Checkbox

## Features

### AIDashboard
- Stats cards: Classified today, Pending review, 30-day accuracy
- Budget progress bar with daily limit
- Confused patterns list (high dismissal patterns)
- Recent activity feed

### ReviewQueue
- Two modes: List view (table) and Single view (email + panel)
- List: Sortable columns (confidence, date, sender), bulk select, bulk actions
- Single: Email preview left, AI analysis panel right
- Keyboard shortcuts: A (accept), D (dismiss), E (edit), arrows (navigate)

### AIAnalysisPanel
- Confidence meter with color coding (green/yellow/red)
- Priority badge
- Suggested tags list
- AI reasoning text

### TagManager
- Modal overlay
- Current tags with remove button
- Available tags with add button
- Search/create new tag input
